<odoo>
    <data>
	<record id="fancy_livechat" model="ir.ui.view">
        <field name="name">fancy.livechat</field>
        <field name="inherit_id" ref="im_livechat.support_page"/>
        <field name="arch" type="xml">
                <xpath expr="//html" position="replace">
                <html style="height: 100%">
                <head>
		    <meta charset="utf-8"/>
                    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
                    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
                    
		    <link type="image/x-icon" rel="shortcut icon" href="/web/image/website/1/favicon/"/>
                    <title><t t-esc="channel.name"/> | Chat</title>

                    <t t-raw="channel.script_external"/>

                    <style type="text/css">
                        body {
                            height: 100%;
                            font-size: 16px;
                            font-weight: 400;
                            font-family: "Lato", "Lucida Grande", "Helvetica neue", "Helvetica", "Verdana", "Arial", sans-serif;
                            overflow: hidden;
                            overflow-y: auto;
                            display: block;
                            margin: 0;
                            padding: 0;
                            border: none;
                            width: 100%;
                            height: 100%;
                            background: #FFF;
			    box-shadow: inset 0 0 40px #bbb;
                        }
                        .main {
                            position: absolute;
                            opacity: 0;
                            top: 50%;
                            width: 100%;
                            margin-top: -150px;
                            color: #213cad;
                            text-align: center;
                        }
                        .main h1 {
                            font-size: 42px;
			    text-shadow: 0 1px 2px rgba(34, 52, 72, 0.6);
                        }
                        .main div {
                            font-style: italic;
                        }
			.o_livechat_button {
			    display:none;
        		    font-size:16px !important;
        		    background-color: rgb(33, 60, 173, 0.8) !important;
                            border-top-left-radius: 3px !important;
                            border-top-right-radius: 3px !important;
                            border: 1px solid #2a43ab !important;
                        }
                        .o_thread_window .o_thread_window_header {
                            border-bottom: 1px solid #0a1a5f !important;
                            background-color: #2b4ee0 !important;
                        }
			.o_thread_window {
			    box-shadow: 0 0 20px rgba(0, 0, 0, 0.3) !important;
			}
			.o_thread_composer {
			    margin:5px !important;
			    height:30px !important;
			}
			.o_thread_window .o_thread_composer input {
    			    height: 30px !important;
			}
			@media only screen and (min-width: 768px) {
  			    .o_thread_window {
				width:70% !important;
				height:80% !important;
    				left: 50% !important;
                            	margin-left: -35% !important;
  			    }
			}
			#online, #offline {
			    padding: 15px 20px;
			    display:none;
			}
			.status {
			    width: auto;
			    display: inline-block;
			    border: 1px solid #bbb;
			    padding: 10px;
			    border-radius: 25px;
			}
			.green_ball {
			    display:inline-block;
                            width:14px;
			    height:14px;
			    background-color:#00ff00;
			    border-radius:50%;
			    margin-right:10px;
			    box-shadow:1px 1px 2px #444;
			}
                        .red_ball {
                            display:inline-block;
                            width:14px;
                            height:14px;
                            background-color:#ff0000;
                            border-radius:50%;
                            margin-right:10px;
                            box-shadow:1px 1px 2px #444;
                        }
			.internal_text {
			    display:inline-block;
			    font-size:14px;
			}
			.btn {
			    background-color: #213cad;
			    color: #fff;
			    border: 1px solid #304499;
			    font-weight: bold;
			    padding: 10px;
		            border-radius: 10px;
			    box-shadow: 0 5px 10px #ccc;
			    font-size: 15px;
			    margin:0 auto;
			}
			.btn:hover {
			    background-color: #304499;
			    cursor:pointer;
			}
                    </style>
                </head>

		<body>
		    <div id="online">
			<div class="status">
				<span class="green_ball"></span><span class="internal_text"><t t-esc="channel.online" /></span>
			</div>
		    </div>
		    <div id="offline">
                        <div class="status">
                                <span class="red_ball"></span><span class="internal_text"><t t-esc="channel.offline" /></span>
                        </div>
                    </div>
                    <div class="main" style="opacity: 1;">
                        <h1 class="channel_name"><t t-esc="channel.name"/></h1>
			<button id="button_chat" class="btn"><t t-esc="channel.btn_message" /></button>
                    </div>
		    <script>
			function openChat(){
				if (document.getElementsByClassName("o_livechat_button").length >= 1) {
					document.getElementsByClassName("o_livechat_button")[0].click();
				}
			}

			function load() { 
				interval = setInterval(function(){
					var el = document.getElementById("button_chat"); 
  					el.addEventListener("click", openChat, false);

					if (document.getElementsByClassName("o_livechat_button").length >= 1) {
						document.getElementById("online").style.display = "block";
						document.getElementById("offline").style.display = "none";
						document.getElementById("button_chat").style.display = "block";
						clearInterval(interval);
					} else {
						document.getElementById("online").style.display = "none";
                                        	document.getElementById("offline").style.display = "block";
						document.getElementById("button_chat").style.display = "none";
					}
				}, 1000);
			} 
			
			document.addEventListener("DOMContentLoaded", load, false);
		    </script>
		    <!-- Fancy LiveChat powered by Moldeo Interactive [www.moldeointeractive.com.ar] -->
                </body>
            	</html>
                </xpath>
        </field>
    	</record>

	<record id="fancy_livechat_options" model="ir.ui.view">
        <field name="name">fancy.livechat.options</field>
	<field name="model">im_livechat.channel</field>
        <field name="inherit_id" ref="im_livechat.im_livechat_channel_view_form"/>
        <field name="arch" type="xml">
		<xpath expr="//notebook/page[2]/group" position="inside">
			<field name="online" />
			<field name="offline" />
			<field name="btn_message" />
		</xpath>
	</field>
	</record>
    </data>
</odoo>
